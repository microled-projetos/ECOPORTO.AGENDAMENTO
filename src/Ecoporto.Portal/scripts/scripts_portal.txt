CREATE TABLE SGIPA.TB_PORTAL_MENUS
(
    Id INT NOT NULL PRIMARY KEY,    
    DESCRICAO VARCHAR2(50),
    URL VARCHAR2(250),
    ATIVO NUMBER(1,0),
    ICONE VARCHAR2(20)
);

CREATE TABLE SGIPA.TB_PORTAL_SUB_MENUS
(
    ID INT NOT NULL PRIMARY KEY,    
    MENUID INT NOT NULL,    
    DESCRICAO VARCHAR2(50),
    URL VARCHAR2(250),
    ATIVO NUMBER(1,0),
    CONSTRAINT FK_PORTAL_MENU FOREIGN KEY (MENUID) REFERENCES SGIPA.TB_PORTAL_MENUS(ID)
);

INSERT INTO SGIPA.TB_PORTAL_MENUS (ID, DESCRICAO, URL, ATIVO) VALUES (1, 'Operador', '#', 1);
INSERT INTO SGIPA.TB_PORTAL_MENUS (ID, DESCRICAO, URL, ATIVO) VALUES (2, 'Importação', '#', 1);
INSERT INTO SGIPA.TB_PORTAL_MENUS (ID, DESCRICAO, URL, ATIVO) VALUES (3, 'Exportação', '#', 1);

INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO) VALUES (1, 1, 'Agendamento Contêiner Operador', 'http://10.1.50.4:3672/Home/Login', 1);
INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO) VALUES (2, 1, 'Agendamento Carga Solta Operador', 'http://10.1.50.4:3128/Home/Login', 1);
INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO) VALUES (3, 1, 'Agendamento TRA/DEPOT Operador', 'http://10.1.50.4:3678/Home/Login', 1);
INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO) VALUES (4, 1, 'Vínculo Transportadora x Recinto', 'http://10.1.50.4:3677/Home/Login', 1);
INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO) VALUES (5, 1, 'Posicionamento Operador', 'http://10.1.50.4:3641/Home/Login', 1);

ALTER TABLE SGIPA.TB_PORTAL_MENUS ADD PARAMETROS VARCHAR2(150);
ALTER TABLE SGIPA.TB_PORTAL_SUB_MENUS ADD PARAMETROS VARCHAR2(150);

UPDATE SGIPA.TB_PORTAL_SUB_MENUS SET PARAMETROS = '?siteSemMenu=1';

ALTER TABLE SGIPA.TB_PORTAL_MENUS ADD DETALHES VARCHAR2(50);
ALTER TABLE SGIPA.TB_PORTAL_MENUS ADD COR VARCHAR2(10);

UPDATE SGIPA.TB_PORTAL_MENUS SET DETALHES = 'Agendamentos Operador' WHERE ID = 1;
UPDATE SGIPA.TB_PORTAL_MENUS SET DETALHES = 'Agendamentos Importação' WHERE ID = 2;
UPDATE SGIPA.TB_PORTAL_MENUS SET DETALHES = 'Agendamentos Exportação/REDEX' WHERE ID = 3;

UPDATE SGIPA.TB_PORTAL_MENUS SET COR = '#608192' WHERE ID = 1;
UPDATE SGIPA.TB_PORTAL_MENUS SET COR = '#00a65a' WHERE ID = 2;
UPDATE SGIPA.TB_PORTAL_MENUS SET COR = '#f39c12' WHERE ID = 3;

UPDATE SGIPA.TB_PORTAL_SUB_MENUS SET Descricao='Agendamento Contêiner' WHERE ID = 1;
UPDATE SGIPA.TB_PORTAL_SUB_MENUS SET Descricao='Agendamento Carga Solta' WHERE ID = 2;
UPDATE SGIPA.TB_PORTAL_SUB_MENUS SET Descricao='Agendamento TRA/DEPOT' WHERE ID = 3;
UPDATE SGIPA.TB_PORTAL_SUB_MENUS SET Descricao='Vínculo Transportadora x Recinto' WHERE ID = 4;
UPDATE SGIPA.TB_PORTAL_SUB_MENUS SET Descricao='Posicionamento' WHERE ID = 5;

INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO, PARAMETROS) VALUES (6,2,'Agendamento Carga Solta', '#', 1, NULL);
INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO, PARAMETROS) VALUES (7,2,'Agendamento Contêiner', '#', 1, NULL);
INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO, PARAMETROS) VALUES (8,3,'Agendamento CS Descarga', '#', 1, NULL);
INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO, PARAMETROS) VALUES (9,3,'Agendamento CS Carregamento', '#', 1, NULL);
INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO, PARAMETROS) VALUES (10,3,'Agendamento CNTR Descarga', '#', 1, NULL);
INSERT INTO SGIPA.TB_PORTAL_SUB_MENUS (ID, MENUID, DESCRICAO, URL, ATIVO, PARAMETROS) VALUES (11,3,'Agendamento CNTR Carregamento', '#', 1, NULL);

UPDATE SGIPA.TB_PORTAL_SUB_MENUS SET PARAMETROS = '?siteSemMenu=1';

CREATE TABLE SGIPA.TB_PORTAL_PERFIL
(
    Id INT NOT NULL PRIMARY KEY,    
    DESCRICAO VARCHAR2(50)    
);    

INSERT INTO SGIPA.TB_PORTAL_PERFIL (ID, DESCRICAO) VALUES (1, 'Administrador');
INSERT INTO SGIPA.TB_PORTAL_PERFIL (ID, DESCRICAO) VALUES (2, 'Transportadora');
INSERT INTO SGIPA.TB_PORTAL_PERFIL (ID, DESCRICAO) VALUES (3, 'Despachante');

CREATE OR REPLACE VIEW SGIPA.VW_PORTAL_EMPRESAS AS

SELECT 
    AUTONUM As Id, 
    RAZAO AS Descricao,
    CGC CNPJ,
    2 As Perfil,
    'Transportadora' As PerfilDescricao    
FROM
    OPERADOR.TB_CAD_TRANSPORTADORAS

UNION

SELECT 
    AUTONUM As Id, 
    RAZAO AS Descricao,
    CGC CNPJ,
    3 As Perfil,
    'Despachante' As PerfilDescricao
FROM
    SGIPA.TB_CAD_PARCEIROS